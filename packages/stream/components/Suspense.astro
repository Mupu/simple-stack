---
import type { LocalsWithStreamInternals } from "./types";

const slotPromise = Astro.slots.render('default');

const { stream } =  Astro.locals as LocalsWithStreamInternals;

const idx = stream.components.length;
stream.components.push(slotPromise);
---

<simple-suspense data-suspense-id={idx}>
  <slot name="fallback" />
</simple-suspense>
